diff --git a/src/KnpU/CodeBattle/Api/ApiProblemResponseFactory.php b/src/KnpU/CodeBattle/Api/ApiProblemResponseFactory.php
new file mode 100644
index 0000000..0dfae60
--- /dev/null
+++ b/src/KnpU/CodeBattle/Api/ApiProblemResponseFactory.php
@@ -0,0 +1,22 @@
+<?php
+
+namespace KnpU\CodeBattle\Api;
+
+use Symfony\Component\HttpFoundation\JsonResponse;
+
+class ApiProblemResponseFactory
+{
+    public function createResponse(ApiProblem $apiProblem)
+    {
+        $data = $apiProblem->toArray();
+        // making type a URL, to a temporarily fake page
+        $data['type'] = 'http://localhost:8000/api/docs/errors#'.$data['type'];
+        $response = new JsonResponse(
+            $data,
+            $apiProblem->getStatusCode()
+        );
+        $response->headers->set('Content-Type', 'application/problem+json');
+
+        return $response;
+    }
+}
diff --git a/src/KnpU/CodeBattle/Application.php b/src/KnpU/CodeBattle/Application.php
index 0def49b..b15f5e0 100644
--- a/src/KnpU/CodeBattle/Application.php
+++ b/src/KnpU/CodeBattle/Application.php
@@ -5,6 +5,7 @@ namespace KnpU\CodeBattle;
 use Doctrine\Common\Annotations\AnnotationReader;
 use KnpU\CodeBattle\Api\ApiProblem;
 use KnpU\CodeBattle\Api\ApiProblemException;
+use KnpU\CodeBattle\Api\ApiProblemResponseFactory;
 use KnpU\CodeBattle\Battle\PowerManager;
 use KnpU\CodeBattle\Repository\BattleRepository;
 use KnpU\CodeBattle\Repository\ProjectRepository;
@@ -200,6 +201,10 @@ class Application extends SilexApplication
         $this['api.validator'] = $this->share(function() use ($app) {
             return new ApiValidator($app['validator']);
         });
+
+        $this['api.response_factory'] = $this->share(function() {
+            return new ApiProblemResponseFactory();
+        });
     }
 
     private function configureSecurity()
@@ -255,7 +260,7 @@ class Application extends SilexApplication
 
             // the class that decides what should happen if no authentication credentials are passed
             $this['security.entry_point.'.$name.'.api_token'] = $app->share(function() use ($app) {
-                return new ApiEntryPoint($app['translator']);
+                return new ApiEntryPoint($app['translator'], $app['api.response_factory']);
             });
 
             return array(
@@ -312,16 +317,10 @@ class Application extends SilexApplication
                 }
             }
 
-            $data = $apiProblem->toArray();
-            // making type a URL, to a temporarily fake page
-            $data['type'] = 'http://localhost:8000/api/docs/errors#'.$data['type'];
-            $response = new JsonResponse(
-                $data,
-                $statusCode
-            );
-            $response->headers->set('Content-Type', 'application/problem+json');
+            /** @var \KnpU\CodeBattle\Api\ApiProblemResponseFactory $factory */
+            $factory = $app['api.response_factory'];
 
-            return $response;
+            return $factory->createResponse($apiProblem);
         });
     }
 } 
\ No newline at end of file
diff --git a/src/KnpU/CodeBattle/Security/Authentication/ApiEntryPoint.php b/src/KnpU/CodeBattle/Security/Authentication/ApiEntryPoint.php
index c1bc017..dccfab4 100644
--- a/src/KnpU/CodeBattle/Security/Authentication/ApiEntryPoint.php
+++ b/src/KnpU/CodeBattle/Security/Authentication/ApiEntryPoint.php
@@ -2,6 +2,8 @@
 
 namespace KnpU\CodeBattle\Security\Authentication;
 
+use KnpU\CodeBattle\Api\ApiProblem;
+use KnpU\CodeBattle\Api\ApiProblemResponseFactory;
 use Symfony\Component\HttpFoundation\JsonResponse;
 use Symfony\Component\HttpFoundation\Request;
 use Symfony\Component\HttpFoundation\Response;
@@ -19,9 +21,12 @@ class ApiEntryPoint implements AuthenticationEntryPointInterface
 {
     private $translator;
 
-    public function __construct(Translator $translator)
+    private $responseFactory;
+
+    public function __construct(Translator $translator, ApiProblemResponseFactory $responseFactory)
     {
         $this->translator = $translator;
+        $this->responseFactory = $responseFactory;
     }
 
     /**
@@ -39,10 +44,7 @@ class ApiEntryPoint implements AuthenticationEntryPointInterface
         $problem = new ApiProblem(ApiProblem::TYPE_AUTHENTICATION_ERROR, 401);
         $problem->set('detail', $message);
 
-        $response = new JsonResponse($problem->toArray(), 401);
-        $response->headers->set('Content-Type', 'application/problem+json');
-
-        return $response;
+        return $this->responseFactory->createResponse($problem);
     }
 
     /**
